<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Maklum Balas Pelanggan</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
  <link rel="manifest" href="site.webmanifest">
  <style>
    .emoji-radio {
      display: none;
    }
    .emoji-label {
      cursor: pointer;
      font-size: 2rem;
      padding: 0.5rem;
      transition: transform 0.2s;
    }
    .emoji-radio:checked + .emoji-label {
      transform: scale(1.3);
      font-weight: bold;
    }
  </style>
</head>
<body class="bg-gray-100 font-sans">
  <!-- Introduction Section -->
  <div id="intro" class="min-h-screen flex items-center justify-center p-4">
    <div class="bg-white rounded-lg shadow-lg p-6 max-w-lg w-full text-center">
      <h1 class="text-2xl font-bold text-gray-800 mb-4">Salam Sejahtera, Salam Malaysia Madani</h1>
      <p class="text-gray-600 mb-4">
        Borang soal selidik secara talian ini diwujudkan bagi mendapat respon umum pengunjung program. Matlamat utama survei ini diadakan bagi mendapatkan gambaran dan interaksi pelanggan secara am berhubung perkhidmatan Jabatan Imigresen Malaysia Sarawak.
      </p>
      <p class="text-gray-600 mb-6">
        Untuk makluman, segala maklumat yang dinyatakan di dalam survei ini adalah sulit. Kerjasama daripada pihak tuan/puan dalam melengkapkan survei ini amatlah dihargai.
      </p>
      <button onclick="showSection('sectionA')" class="bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 transition">Teruskan</button>
    </div>
  </div>

  <!-- Section A: Profil Demografik -->
  <div id="sectionA" class="hidden min-h-screen flex items-center justify-center p-4">
    <div class="bg-white rounded-lg shadow-lg p-6 max-w-2xl w-full">
      <h2 class="text-xl font-semibold text-gray-800 mb-4" id="formTitleHeader"></h2>
      <h3 class="text-lg font-medium text-gray-700 mb-4">Bahagian A: Profil Demografik</h3>
      <form id="formA" class="space-y-4">
        <div>
          <label class="block text-gray-700">Nama Penuh</label>
          <input type="text" id="namaPenuh" class="w-full border rounded p-2" required>
        </div>
        <div>
          <label class="block text-gray-700">No. Telefon</label>
          <input type="tel" id="noTelefon" class="w-full border rounded p-2" required>
        </div>
        <div>
          <label class="block text-gray-700">Jantina</label>
          <select id="jantina" class="w-full border rounded p-2" required>
            <option value="">Pilih jantina</option>
            <option value="Lelaki">Lelaki</option>
            <option value="Perempuan">Perempuan</option>
          </select>
        </div>
        <div>
          <label class="block text-gray-700">Umur</label>
          <select id="umur" class="w-full border rounded p-2" required>
            <option value="">Pilih umur</option>
            <option value="18 dan kebawah">18 dan kebawah</option>
            <option value="19-39">19-39</option>
            <option value="40-59">40-59</option>
            <option value="60 dan ke atas">60 dan ke atas</option>
          </select>
        </div>
        <div>
          <label class="block text-gray-700">Bangsa</label>
          <select id="bangsa" class="w-full border rounded p-2" required>
            <option value="">Pilih bangsa</option>
            <option value="Iban">Iban</option>
            <option value="Bidayuh">Bidayuh</option>
            <option value="Melayu">Melayu</option>
            <option value="Cina">Cina</option>
            <option value="Orang Ulu">Orang Ulu</option>
            <option value="Lain-lain">Lain-lain</option>
          </select>
        </div>
        <div>
          <label class="block text-gray-700">Status Pekerjaan</label>
          <select id="statusPekerjaan" class="w-full border rounded p-2" required>
            <option value="">Pilih status pekerjaan</option>
            <option value="Kerajaan">Kerajaan</option>
            <option value="Swasta">Swasta</option>
            <option value="Bekerja Sendiri">Bekerja Sendiri</option>
            <option value="Pelajar">Pelajar</option>
            <option value="Tidak bekerja">Tidak bekerja</option>
          </select>
        </div>
        <div>
          <label class="block text-gray-700">Tahap Pendidikan</label>
          <select id="tahapPendidikan" class="w-full border rounded p-2" required>
            <option value="">Pilih tahap pendidikan</option>
            <option value="SPM">SPM</option>
            <option value="STPM/DIPLOMA">STPM/DIPLOMA</option>
            <option value="IJAZAH">IJAZAH</option>
            <option value="SARJANA/PHD">SARJANA/PHD</option>
          </select>
        </div>
        <div>
          <label class="block text-gray-700">Status Perkahwinan</label>
          <select id="statusPerkahwinan" class="w-full border rounded p-2" required>
            <option value="">Pilih status perkahwinan</option>
            <option value="Berkahwin">Berkahwin</option>
            <option value="Bujang">Bujang</option>
            <option value="Duda">Duda</option>
            <option value="Janda">Janda</option>
          </select>
        </div>
        <div>
          <label class="block text-gray-700">Negeri/Negara Tempat Tinggal</label>
          <select id="negeri" class="w-full border rounded p-2" required>
            <option value="">Pilih negeri/negara</option>
            <option value="Negeri Sarawak">Negeri Sarawak</option>
            <option value="Luar Negeri Sarawak">Luar Negeri Sarawak</option>
          </select>
        </div>
        <div>
          <label class="block text-gray-700">Kekerapan Berurusan dengan Jabatan ini dalam Setahun</label>
          <select id="kekerapan" class="w-full border rounded p-2" required>
            <option value="">Pilih kekerapan</option>
            <option value="1-5 kali">1-5 kali</option>
            <option value="5-20 kali">5-20 kali</option>
            <option value="lebih 20 kali">lebih 20 kali</option>
            <option value="tidak pernah">tidak pernah</option>
          </select>
        </div>
        <div>
          <label class="block text-gray-700">Jenis Urusan yang Sering Dilakukan</label>
          <select id="jenisUrusan" class="w-full border rounded p-2" required>
            <option value="">Pilih jenis urusan</option>
            <option value="Pasport">Pasport</option>
            <option value="Visa Pas & Permit">Visa Pas & Permit</option>
            <option value="Pekerja Asing & Ekspatriat">Pekerja Asing & Ekspatriat</option>
            <option value="Penguatkuasa">Penguatkuasa</option>
            <option value="Lain-lain">Lain-lain</option>
          </select>
        </div>
        <button type="button" onclick="showSection('sectionB')" class="bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 transition">Teruskan</button>
      </form>
    </div>
  </div>

  <!-- Section B: Interaksi Pelanggan -->
  <div id="sectionB" class="hidden min-h-screen flex items-center justify-center p-4">
    <div class="bg-white rounded-lg shadow-lg p-6 max-w-2xl w-full">
      <h2 class="text-xl font-semibold text-gray-800 mb-4">Bahagian B: Interaksi Pelanggan Berkaitan Perkhidmatan</h2>
      <p class="text-gray-600 mb-4">Sila nyatakan kepuasan berkaitan perkhidmatan Jabatan Imigresen Malaysia Sarawak berdasarkan skala berikut:</p>
      <p class="text-gray-600 mb-4">😞 Tidak Memuaskan | 🙁 Kurang Memuaskan | 😐 Sederhana | 🙂 Memuaskan | 😊 Sangat Memuaskan</p>
      <form id="formB" class="space-y-4">
        <div>
          <label class="block text-gray-700">Perkhidmatan</label>
          <div class="flex space-x-2">
            <input type="radio" name="perkhidmatan" id="perkhidmatan1" value="Tidak Memuaskan" class="emoji-radio" required>
            <label for="perkhidmatan1" class="emoji-label">😞</label>
            <input type="radio" name="perkhidmatan" id="perkhidmatan2" value="Kurang Memuaskan" class="emoji-radio">
            <label for="perkhidmatan2" class="emoji-label">🙁</label>
            <input type="radio" name="perkhidmatan" id="perkhidmatan3" value="Sederhana" class="emoji-radio">
            <label for="perkhidmatan3" class="emoji-label">😐</label>
            <input type="radio" name="perkhidmatan" id="perkhidmatan4" value="Memuaskan" class="emoji-radio">
            <label for="perkhidmatan4" class="emoji-label">🙂</label>
            <input type="radio" name="perkhidmatan" id="perkhidmatan5" value="Sangat Memuaskan" class="emoji-radio">
            <label for="perkhidmatan5" class="emoji-label">😊</label>
          </div>
        </div>
        <div>
          <label class="block text-gray-700">Layanan Kakitangan</label>
          <div class="flex space-x-2">
            <input type="radio" name="layanan" id="layanan1" value="Tidak Memuaskan" class="emoji-radio" required>
            <label for="layanan1" class="emoji-label">😞</label>
            <input type="radio" name="layanan" id="layanan2" value="Kurang Memuaskan" class="emoji-radio">
            <label for="layanan2" class="emoji-label">🙁</label>
            <input type="radio" name="layanan" id="layanan3" value="Sederhana" class="emoji-radio">
            <label for="layanan3" class="emoji-label">😐</label>
            <input type="radio" name="layanan" id="layanan4" value="Memuaskan" class="emoji-radio">
            <label for="layanan4" class="emoji-label">🙂</label>
            <input type="radio" name="layanan" id="layanan5" value="Sangat Memuaskan" class="emoji-radio">
            <label for="layanan5" class="emoji-label">😊</label>
          </div>
        </div>
        <div>
          <label class="block text-gray-700">Penerangan / Panduan Jelas</label>
          <div class="flex space-x-2">
            <input type="radio" name="penerangan" id="penerangan1" value="Tidak Memuaskan" class="emoji-radio" required>
            <label for="penerangan1" class="emoji-label">😞</label>
            <input type="radio" name="penerangan" id="penerangan2" value="Kurang Memuaskan" class="emoji-radio">
            <label for="penerangan2" class="emoji-label">🙁</label>
            <input type="radio" name="penerangan" id="penerangan3" value="Sederhana" class="emoji-radio">
            <label for="penerangan3" class="emoji-label">😐</label>
            <input type="radio" name="penerangan" id="penerangan4" value="Memuaskan" class="emoji-radio">
            <label for="penerangan4" class="emoji-label">🙂</label>
            <input type="radio" name="penerangan" id="penerangan5" value="Sangat Memuaskan" class="emoji-radio">
            <label for="penerangan5" class="emoji-label">😊</label>
          </div>
        </div>
        <div>
          <label class="block text-gray-700">Pengalaman Keseluruhan</label>
          <div class="flex space-x-2">
            <input type="radio" name="pengalaman" id="pengalaman1" value="Tidak Memuaskan" class="emoji-radio" required>
            <label for="pengalaman1" class="emoji-label">😞</label>
            <input type="radio" name="pengalaman" id="pengalaman2" value="Kurang Memuaskan" class="emoji-radio">
            <label for="pengalaman2" class="emoji-label">🙁</label>
            <input type="radio" name="pengalaman" id="pengalaman3" value="Sederhana" class="emoji-radio">
            <label for="pengalaman3" class="emoji-label">😐</label>
            <input type="radio" name="pengalaman" id="pengalaman4" value="Memuaskan" class="emoji-radio">
            <label for="pengalaman4" class="emoji-label">🙂</label>
            <input type="radio" name="pengalaman" id="pengalaman5" value="Sangat Memuaskan" class="emoji-radio">
            <label for="pengalaman5" class="emoji-label">😊</label>
          </div>
        </div>
        <div>
          <label class="block text-gray-700">Cadangan / Maklum Balas</label>
          <textarea id="cadangan" class="w-full border rounded p-2" rows="4"></textarea>
        </div>
        <button type="button" onclick="submitForm()" class="bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 transition">Hantar</button>
      </form>
    </div>
  </div>

  <!-- Success Section -->
  <div id="success" class="hidden min-h-screen flex items-center justify-center p-4">
    <div class="bg-white rounded-lg shadow-lg p-6 max-w-lg w-full text-center">
      <h2 class="text-2xl font-bold text-gray-800 mb-4">😊 Terima Kasih!</h2>
      <p class="text-gray-600 mb-6">Terima kasih atas maklum balas anda!</p>
      <button onclick="window.location.href='title.html'" class="bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 transition">Tutup</button>
    </div>
  </div>

  <!-- Error Section -->
  <div id="error" class="hidden min-h-screen flex items-center justify-center p-4">
    <div class="bg-white rounded-lg shadow-lg p-6 max-w-lg w-full text-center">
      <h2 class="text-2xl font-bold text-red-600 mb-4">Ralat</h2>
      <p class="text-gray-600 mb-6">Sila isi semua medan yang diperlukan.</p>
      <button onclick="showSection('sectionA')" class="bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 transition">Tutup</button>
    </div>
  </div>

  <script>
    // Dapatkan tajuk borang dari parameter URL
    const urlParams = new URLSearchParams(window.location.search);
    const formTitle = urlParams.get('formTitle') || 'Maklum Balas';
    document.getElementById('formTitleHeader').textContent = formTitle;

    function showSection(sectionId) {
      document.querySelectorAll('div[id]').forEach(div => div.classList.add('hidden'));
      document.getElementById(sectionId).classList.remove('hidden');
    }

    function submitForm() {
      const formA = document.getElementById('formA');
      const formB = document.getElementById('formB');
      const data = {
        formTitle: formTitle,
        namaPenuh: document.getElementById('namaPenuh').value,
        noTelefon: document.getElementById('noTelefon').value,
        jantina: document.getElementById('jantina').value,
        umur: document.getElementById('umur').value,
        bangsa: document.getElementById('bangsa').value,
        statusPekerjaan: document.getElementById('statusPekerjaan').value,
        tahapPendidikan: document.getElementById('tahapPendidikan').value,
        statusPerkahwinan: document.getElementById('statusPerkahwinan').value,
        negeri: document.getElementById('negeri').value,
        kekerapan: document.getElementById('kekerapan').value,
        jenisUrusan: document.getElementById('jenisUrusan').value,
        perkhidmatan: document.querySelector('input[name="perkhidmatan"]:checked')?.value,
        layanan: document.querySelector('input[name="layanan"]:checked')?.value,
        penerangan: document.querySelector('input[name="penerangan"]:checked')?.value,
        pengalaman: document.querySelector('input[name="pengalaman"]:checked')?.value,
        cadangan: document.getElementById('cadangan').value
      };

      if (Object.values(data).slice(0, -1).every(val => val)) {
        fetch('https://script.google.com/macros/s/AKfycbwsMEg8g7VjGWiuh3y6VoEyYnI8zM80NGt5GinjQtwmM1cpVqTMrthsrHc6WCZ83Uq6/exec', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ functionName: 'saveFeedback', data: data }),
          mode: 'cors'
        })
        .then(response => {
          if (response.ok) {
            showSection('success');
          } else {
            showSection('error');
          }
        })
        .catch(() => showSection('error'));
      } else {
        showSection('error');
      }
    }
  </script>
</body>
</html>
